# c_rules
rules for c mudules

## Правила создания новых модулей в языке программирования Си.

#### 1. Создание пустых файлов

Создайте пустые файлы `newmod.c` и `newmod.h`:
<pre>
```bash
touch newmod.c newmod.h
```
</pre>

####  2. Вставка директивы в newmod.c
Вставьте в файл ***newmod.c*** следующую директиву:

<pre>
```c
#include "newmod.h"
```
</pre>
####  3. Вставка директив в newmod.h
Вставьте в файл ***newmod.h*** следующие директивы, оставив между ними пустое пространство для содержимого заголовочного файла:
<pre>
```c
#ifndef NEWMOD_H_SENTRY
#define NEWMOD_H_SENTRY

#endif

#define _(STR) gettext (SRT)  // макрос интернационализации
#define N_(STR) (STR)

```
</pre>
#### 4. Регистрация в системе контроля версий и системе сборки
Зарегистрируйте созданные файлы в вашей системе контроля версий (например, Git) и системе сборки (если используется). Используйте соответствующие команды:

<pre>
```bash
# Регистрация в Git
git add newmod.c newmod.h
git commit -m "Добавлены файлы newmod.c и newmod.h"

# Другие действия по необходимости...
```
</pre>
#### 5. Отражение в документации
Обновите документацию вашего проекта, чтобы отразить появление нового модуля. Включите описание нового модуля, его назначение, и, при необходимости, инструкции по его использованию.

### Примечание:
Убедитесь, что документация поддерживается в актуальном состоянии и соответствует изменениям в вашем проекте.

### Передача аргументов в функцию (ассемблер)
Аргументы, не являющиеся значениями с плавающей точкой, такие как целые числа и адреса, передаются в следующем порядке:

1. 1-й аргумент передается в регистре `rdi`;
2. 2-й аргумент передается в регистре `rsi`;
3. 3-й аргумент передается в регистре `rdx`;
4. 4-й аргумент передается в регистре `rcx`;
5. 5-й аргумент передается в регистре `r8`;
6. 6-й аргумент передается в регистре `r9`.

Дополнительные аргументы передаются через стек — обязательно в обратном порядке, чтобы можно было извлечь их в правильном порядке. Например, при передаче 10 аргументов порядок следующий:

- первым в стек записывается 10-й аргумент;
- затем в стек записывается 9-й аргумент;
- потом в стек записывается 8-й аргумент;
- последним в стек записывается 7-й аргумент.

После перехода в функцию необходимо обеспечить извлечение значений из регистров. При извлечении значений из стека будьте чрезвычайно внимательны: помните о том, что адрес возврата также записывается в стек сразу после аргументов.

- При записи в стек 10-го аргумента указатель стека `rsp` уменьшается на 8 байт.
- При записи в стек 9-го аргумента `rsp` уменьшается на 8 байт.
- При записи в стек 8-го аргумента `rsp` уменьшается на 8 байт.
- При записи в стек 7-го аргумента `rsp` уменьшается на 8 байт.

Затем при вызове функции содержимое регистра `rip` записывается в стек, и указатель стека `rsp` уменьшается на 8 байт.

Далее в начале функции регистр `rbp` записывается в стек — это часть пролога, а указатель стека `rsp` уменьшается на 8 байт.

После этого стек выравнивается по 16-байтовой границе, поэтому, возможно, потребуется еще одна операция записи в стек `push`, чтобы уменьшить `rsp` на 8 байт.

